<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>WebSockets, a game of give and take | Jon Kuperman | The personal website and blog of Jon Kuperman.</title>

  
  <meta name="author" content="Jon Kuperman">
  

  
  <meta name="description" content="Stop pulling for data when you should be pushing.">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="WebSockets, a game of give and take"/>

  <meta property="og:site_name" content="Jon Kuperman"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Jon Kuperman" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Jon Kuperman</a>
    </h1>
    <p class="site-description">The personal website and blog of Jon Kuperman.</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/about">About</a></li>
      
        <li><a href="/speaking">Speaking</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>WebSockets, a game of give and take</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/websockets-a-game-of-give-and-take/" rel="bookmark">
        <time class="entry-date published" datetime="2014-10-26T07:00:00.000Z">
          2014-10-26
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>Clients polling servers for data is usually wrong. It doesn’t make sense. It’s not how things are done in the real world.</p>
<p>All updates on the web happen for one of two reasons:</p>
<ol>
<li><p><strong>Client-Updates-Server</strong>. The client has done something differently and the server needs to know about it order to make updates. Think scrolling around on Google Maps.</p>
</li>
<li><p><strong>Server-Updates-Client</strong>. The server has more up to date information than was originally served to the client and needs to make the client aware. Think stock tickers.</p>
</li>
</ol>
<p>The problem is that we handle both of these situations the same way, forcing the client to poll for updates regularly. This approach works well for <strong>Client-Updates-Server</strong> but there are a few problems for <strong>Server-Updates-Client:</strong></p>
<ol>
<li><p>You have to make a choice between polling too frequently and wasting a ton of resources, or not polling frequently enough and having your users look at stale data.</p>
</li>
<li><p>You’re always making two requests when only one is needed. When you AJAX out for data you make a request to the server, which checks to see if it has new information and makes a request back. If you could skip the first request, there would simply be <strong>half as many</strong> requests being made.</p>
</li>
</ol>
<h2 id="Enter-WebSockets"><a href="#Enter-WebSockets" class="headerlink" title="Enter WebSockets"></a>Enter WebSockets</h2><p>WebSockets is a technology that allows you ( the server ) to open an interactive tunnel to your users ( the client ). You can check out the <a href="http://tools.ietf.org/html/rfc6455" target="_blank" rel="external">official RFC here</a>, read <a href="https://developer.mozilla.org/en-US/docs/WebSockets" target="_blank" rel="external">the MDN article</a> or just start messing around with <a href="http://socket.io/" target="_blank" rel="external">Socket.io</a> now!</p>
<p><a href="http://socket.io/" target="_blank" rel="external">Socket.io</a> has been out for a while now but it has mostly been used for projects where the benefits of push are obvious like video games or collaborative apps like <a href="https://trello.com/" target="_blank" rel="external">Trello</a>. I want to talk about it’s use in sites and apps where the benefit of push might be more subtle.</p>
<h3 id="A-Simple-Check"><a href="#A-Simple-Check" class="headerlink" title="A Simple Check"></a>A Simple Check</h3><p>Next time you’re working on a web app, and you go to do an AJAX call, ask yourself this question:</p>
<blockquote>
<p>Is it the client or the server with new information to share?</p>
</blockquote>
<p>If the client has new information, go ahead with AJAX business as usual! Otherwise, please consider switching to WebSockets.</p>
<h2 id="Limitations"><a href="#Limitations" class="headerlink" title="Limitations"></a>Limitations</h2><p>At the time of this writing, WebSocket technology is pretty limited to stacks that are long running processes like Node.js. If you wanted to get WebSockets working with scripting languages like PHP or Ruby, you’ll have to add something like <a href="http://redis.io/" target="_blank" rel="external">Redis</a> for pubsub. Check out <a href="https://github.com/rase-/socket.io-php-emitter" target="_blank" rel="external">this PHP implementation</a> for more information on setting that up.</p>
<p>The point is, the more we all start using this technology the better the tooling around it will be. So stop pulling when you should be pushing!</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>

  



    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2016 Jon Kuperman
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-21008844-11', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
</body>
</html>